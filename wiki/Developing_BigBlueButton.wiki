#summary How to develop BigBlueButton.

*NOTE*
This is still a draft. We will finalize this when we release 0.62. If you run into problems, please post to the mailing list.

= Our Goal =
We are developers, and we want to make it easy for others to help out in the BigBlueButton project.  Because BigBlueButton incorporates a lot of OpenSourceComponents (over 14), there's a fair bit of work to setup all the components from source.  

The BigBlueButton VM contains everything needed to run BigBlueButton.  We've extended the VM with scripts to let you also use it as a development engine.  We present below two ways to let you easily make changes to BigBlueButton.  The first approach is within the Unix environment.  With only a few commands, you can modify the BigBlueButton Flex client or update the text on the BigBlueButton web interface.

After you've made a few quick changes, you'll quickly want to start using some Real Development Tools.  The second approach is to use Flex Builder for editing the BigBlueButton client and Eclipse to edit the other components.

This is how we develop BigBlueButton internally: we use Windows for the development environment and the BigBlueButton VM to build and test.

We primarily develop on Windows with BBB running on VMWare. This page will describe how we setup our development environment for !BigBlueButton.

= Get BBB VM running =
 * Follow the instructions to download and start BBB here http://code.google.com/p/bigbluebutton/wiki/BigBlueButtonVM
 * Make sure you can join to the default conference (85115) and everything works.

= Setup Samba =
First, if you are using Windows, you'll want to share your development directory.

{{{
  bbb-conf --setup-samba
}}}

 * Map /home/firstuser into a windows drive (e.g. Z:)
 * Now you'll have access to the directory from your windows machine.

= Setup Development Environment =
The instructions here allow you to make minor changes to !BigBlueButton. If you want to do more, you should refer to the instructions below under "Setup a Full Development Environment"

== To develop on !BigBlueButton Web (grails application) ==

To setup a development environment for bbb-web, enter the following command

{{{
  bbb-conf --setup-dev bbb-web
}}}

This won't replace the existing bbb-web package; rather, it will let you run bbb-web as a stand alone grails application.  Before your run bbb-web standalone, you need to stop tomcat.  

{{{
  sudo /etc/init.d/tomcat6 stop
}}}

To compile and run bbb-web, do the following

{{{
  cd ~/dev/bbb-web
  ant
}}}

== To develop on !BigBlueButton Client (Flex application) ==

To setup a development environment for bbb-web, enter the following command

{{{
  bbb-conf --setup-dev bbb-client
}}}

Like bbb-web, this won't overwrite the existing bbb-client package; rather, it will let you develop in the `~/dev/bbb-client` directory.

To compile bbb-client, do the following

{{{
  cd ~/dev/bbb-client
  ant
}}}

This will create a folder called `~/dev/bbb-client/bin` which contains the latest client.

Now, to run the client, you can just open your web browser, enter the URL for your computer (or VM), and when you load the web client, you'll be loading the client from `~/dev/bbb-client/bin`.

This works because `bbb-conf --setup-dev bbb-client` changed the location for `/client` from `/var/www/bigbluebutton-client` to `/home/firstuser/dev/bbb-client/`.

----

= Setup a Full Development Environment =
The instructions below assumes you have FlexBuilder and Eclipse installed with the Subclipse plugin.

== Remove BBB packages ==

List the BBB packages by typing
{{{
dpkg -l | grep bbb
}}}

which results:
{{{
rc  bbb-apps                          0.35.0-1ubuntu113                         Red5 applications for BigBlueButton
ii  bbb-apps-deskshare                0.4.0-1ubuntu53                           Red5 applications for BigBlueButton deskshar
ii  bbb-apps-sip                      0.5.0-1ubuntu14                           Red5 applications for BigBlueButton SIP modu
ii  bbb-apps-video                    0.5.0-1ubuntu8                            Red5 applications for BigBlueButton Video mo
ii  bbb-config                        0.4.0-1ubuntu63                           Configuration setup for BigBlueButton

}}}

 * To remove, type e.g. {{{apt-get remove bbb-apps}}}
 * Create a dev directory in /home/firstuser/dev
 
== Developing the Client ==
Create a client dev directory
{{{
 cd ~/dev
 mkdir ~/dev/source
 mkdir ~/dev/source/client
}}}

From your FlexBuilder, checkout bbb-client from trunk. Make sure you checkout into the `~/dev/source/client` directory through your mapped network drive.

Copy over the packaged `config.xml` over your dev `config.xml`
{{{
  cp /var/www/bigbluebutton/client/conf/config.xml ~/dev/source/client/bigbluebutton-client/conf/
}}}

Make Nginx serve the dev client. The generated files for bbb-client will be in bbb-client/bin folder.

Create a directory `/var/www/client-dev`

{{{
  sudo mkdir /var/www/client-dev
  sudo ln -s /home/firstuser/dev/source/client/bigbluebutton-client/bin /var/www/client-dev/client 
}}}

Edit Nginx config
{{{
 sudo vi /etc/nginx/sites-available/bigbluebutton
}}}

Modify the `/client` section to point to `/var/www/client-dev`
{{{
        location /client {
                root    /var/www/client-dev;
                index  index.html index.htm;
        }
}}}

Now your development client will be picked up when you point your browser to 
{{{
http://<yourhost>/client/BigBlueButton.html
}}}

= Developing bbb-apps, bbb-sip, bbb-video, bbb-deskshare =
 * Edit the build.properties for each project modify red5.home to point to the red5 install directory
{{{
  red5.home = /usr/share/red5
}}}
 * For each project, run {{{ant resolve}}} to download all dependencies.
 * For each project, run {{{ant deploy}}} to deploy the apps to Red5
 * Start Red5
 * If everything goes well, you should be able to join the default conference.

= Developing bbb-web =
 * Check out bbb-web into /home/firstuser/dev
 * Stop tomcat 
{{{
 /etc/init.d/tomcat6 stop
}}}
 * in {{{/home/firstuser/dev/bbb-web}}}, run 
{{{
 grails run-app
}}}
 * You should now be using bbb-web when you point your browser to
{{{
 http://<yourip>/bigbluebutton
}}}