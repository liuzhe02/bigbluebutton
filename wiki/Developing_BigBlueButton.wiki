#summary How to develop BigBlueButton.

<wiki:toc max_depth="2" />

*NOTE*
This is still draft. We will finalize this when we release 0.62. If you run into problems, please post to the mailing list.

= Welcome to !BigBlueButton Development =
In looking at other successful open source projects, one consistent theme is they try to make it easy for other developers to make changes to the code.  When creating BigBlueButton, instead of just writing software and throwing a tarball over the wall, we had the following goals:

  # Make it easy for a developer to implement small changes
  # Make it easy for a developer to setup a full development environment
  # Support other developers so that some may become contributors to the project

If you just want to run !BigBlueButton, the BigBlueButtonVM makes it very easy to setup your own serer.  What you may not realize is that the VM is also a full !BigBlueButton development environment.  We've pre-configured it with all the tools needed to build, test, and deploy updates to BigBlueButton.   This is how we develop !BigBlueButton internally: we use Windows for the development to run Flex Builder and Eclipse, and run the VM under VMWare Workstation to test changes. 

To show you how this works, this document presents two approaches.  Following our first goal (make it easy to implement small changes), we show how with a few commands at the Unix terminal, you can modify components of !BigBluebutton.

After you've made a few quick changes, you'll quickly want to start using some Real Development Tools (TM).  The second approach show you how to setup Flex Builder for editing the BigBlueButton client, and how to setup Eclipse to edit the other components.


== Getting Started ==
First, follow the instructions on [http://code.google.com/p/bigbluebutton/wiki/BigBlueButtonVM  how to setup the BigBlueButton VM].

Make sure the VM has an IP address and you can open your web browser to the IP address and  join the default conference 85115.

You should also review the ArchitectureOverview to understand the main components of !BigBluebutton.

If you are developing on Windows, run the following command

{{{
  bbb-conf --setup-samba
}}}

This will share the /home/firstuser/dev folder so you can easily access your source from any windows editor.  Some editors (such as Eclipses) need you to map a network drive to a 
Next, map /home/firstuser into a windows drive (e.g. V:).  To do this, open Windows Explorer, hit the Alt key, and choose the menu command Tolls -> Map Network Drive.
 
Once you've mapped it as your V drive, you can edit the files from within windows. 

= Setup Development Environment =
The instructions here allow you to make minor changes to !BigBlueButton. If you want to do more, skip to the next section on "Setup a Full Development Environment"

== bbb-web: Making changes to the BigBlueButton web interface ==

To setup a development environment for bbb-web, enter the following command

{{{
  bbb-conf --setup-dev bbb-web
}}}

This won't replace the existing bbb-web package; rather, it will let you run bbb-web as a stand alone grails application.  Before your run bbb-web standalone, you need to stop tomcat.  

{{{
  sudo /etc/init.d/tomcat6 stop
}}}

To compile and run bbb-web, do the following

{{{
  cd ~/dev/bbb-web
  ant
}}}

If you want to revert back to the web interface installed by the package bbb-web, do the following

{{{
  # Make sure grails isn't running
  sudo /etc/init.d/tomcat6 start
}}}


== bbb-client: Making changes to the BigBlueButton Flex client ==

To setup a development environment for bbb-web, enter the following command

{{{
  bbb-conf --setup-dev bbb-client
}}}

Like bbb-web, this won't overwrite the existing bbb-client package; rather, it will let you develop in the `~/dev/bbb-client` directory.

To compile bbb-client, do the following

{{{
  cd ~/dev/bbb-client
  ant
}}}

This will create a folder called `~/dev/bbb-client/bin` which contains the latest client.

Now, to run the client, you can just open your web browser, enter the URL for your computer (or VM), and when you load the web client, you'll be loading the client from `~/dev/bbb-client/bin`.

This works because `bbb-conf --setup-dev bbb-client` changed the location for `/client` from `/var/www/bigbluebutton-client` to `/home/firstuser/dev/bbb-client/`.

== bbb-apps: Making changes ==

To setup a development environment for bbb-apps, enter the following command

{{{
  bbb-conf --setup-dev bbb-apps
}}}

This will checkout bbb-apps to `~/dev/bbb-apps`.  The easiest way to run your own version of bbb-apps is to run red5 from the command line.  This way, you can immediately see any errors on the console.  To do this

{{{
    sudo /etc/init.d/red5 stop
}}}

Now, to test your own local copy, do the following.
{{{
    cd ~/dev/bbb-apps

    # Make changes to source

    ant deploy
    sudo -u red5 /usr/share/red5/red5.sh
}}}

If you want to revert back to the packaged version of BigBlueButton apps, do the following

{{{
    rm -rf /usr/share/red5/webapps/bigbluebutton
    sudo apt-get install bbb-apps
    sudo /etc/init.d/red5 start
}}}
----

_Older content -- to be updated__

= Setup a Full Development Environment =
The instructions below assumes you have FlexBuilder and Eclipse installed with the Subclipse plugin.

== Remove BBB packages ==

List the BBB packages by typing
{{{
dpkg -l | grep bbb
}}}

which results:
{{{
rc  bbb-apps                          0.35.0-1ubuntu113                         Red5 applications for BigBlueButton
ii  bbb-apps-deskshare                0.4.0-1ubuntu53                           Red5 applications for BigBlueButton deskshar
ii  bbb-apps-sip                      0.5.0-1ubuntu14                           Red5 applications for BigBlueButton SIP modu
ii  bbb-apps-video                    0.5.0-1ubuntu8                            Red5 applications for BigBlueButton Video mo
ii  bbb-config                        0.4.0-1ubuntu63                           Configuration setup for BigBlueButton

}}}

 * To remove, type e.g. {{{apt-get remove bbb-apps}}}
 * Create a dev directory in /home/firstuser/dev
 
== Developing the Client ==
Create a client dev directory
{{{
 cd ~/dev
 mkdir ~/dev/source
 mkdir ~/dev/source/client
}}}

From your FlexBuilder, checkout bbb-client from trunk. Make sure you checkout into the `~/dev/source/client` directory through your mapped network drive.

Copy over the packaged `config.xml` over your dev `config.xml`
{{{
  cp /var/www/bigbluebutton/client/conf/config.xml ~/dev/source/client/bigbluebutton-client/conf/
}}}

Make Nginx serve the dev client. The generated files for bbb-client will be in bbb-client/bin folder.

Create a directory `/var/www/client-dev`

{{{
  sudo mkdir /var/www/client-dev
  sudo ln -s /home/firstuser/dev/source/client/bigbluebutton-client/bin /var/www/client-dev/client 
}}}

Edit Nginx config
{{{
 sudo vi /etc/nginx/sites-available/bigbluebutton
}}}

Modify the `/client` section to point to `/var/www/client-dev`
{{{
        location /client {
                root    /var/www/client-dev;
                index  index.html index.htm;
        }
}}}

Now your development client will be picked up when you point your browser to 
{{{
http://<yourhost>/client/BigBlueButton.html
}}}

= Developing bbb-apps, bbb-sip, bbb-video, bbb-deskshare =
 * Edit the build.properties for each project modify red5.home to point to the red5 install directory
{{{
  red5.home = /usr/share/red5
}}}
 * For each project, run {{{ant resolve}}} to download all dependencies.
 * For each project, run {{{ant deploy}}} to deploy the apps to Red5
 * Start Red5
 * If everything goes well, you should be able to join the default conference.

= Developing bbb-web =
 * Check out bbb-web into /home/firstuser/dev
 * Stop tomcat 
{{{
 /etc/init.d/tomcat6 stop
}}}
 * in {{{/home/firstuser/dev/bbb-web}}}, run 
{{{
 grails run-app
}}}
 * You should now be using bbb-web when you point your browser to
{{{
 http://<yourip>/bigbluebutton
}}}