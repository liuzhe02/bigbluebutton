# Summary of how to install or build the SIP applet.

_This page is still under construction so some information might not be accurate. Sorry for the inconvenience_

<wiki:toc max_depth="3" />


= Installation of Coral CEA Release =


==Installing from packages==

*Prerequisites*

This section contains instructions for installing !BigBlueButton SIP applet on a Ubuntu 10.04 32-bit or 64-bit serve. 

Before you install, you'll need:

  # An Ubuntu 10.04 32-bit or 64-bit server
  # 2 GB of memory
  # Root access to the server
  # 5G of free disk space
  # Port 80 is not in use by other applications

Note: !BigBlueButton uses nginx, which listens on port 80 for http access and tunneling.  If you have apache already running on your server, then you'll need to configure apache to listen on a different port. 
To do this, edit `/etc/apache2/ports.conf` and change the entry for 80 to another number, such as 8081.  Avoid using 8080 in apache as !BigBlueButton uses tomcat6 which binds to that port.  



{{{
wget http://173.195.48.99/coralcea.asc  -O- | sudo apt-key add - 

echo "deb http://173.195.48.99/lucid_dev/  bigbluebutton-lucid main" | sudo tee /etc/apt/sources.list.d/bigbluebutton.list
echo "deb http://us.archive.ubuntu.com/ubuntu/ lucid multiverse" | sudo tee -a /etc/apt/sources.list

}}}

Install the voice system, (youwill need to install Asterisk, FreeSwitch not tested yet)  
{{{
sudo apt-get update
sudo apt-get install bbb-voice-conference

}}}

The install BBB
{{{
sudo apt-get install bigbluebutton
sudo bbb-conf --clean
sudo bbb-conf --check

}}}



==Building from source code==

*Prerequisites*

Bigbluebutton 0.71a virtual machine

*Instructions*

This section contains instructions for checking out the code from  [https://github.com/coralcea Coral CEA] git repository or [https://github.com/realwatcm Realwat] git repository for latest changes regarding the Bigbluebutton SIP applet and SIP phone. 
Below are the steps on how to check out the source code and build from realwat git repository
a)Remove or backup folder /home/firstuser/dev/source/bigbluebutton

b)Check out the source code from realwat git repository
{{{
$ git clone git://github.com/realwatcm/bigbluebutton.git 
OR
$ git clone git://github.com/coralcea/bigbluebutton.git
}}}

c)Build bbb-common-message library
{{{
$ cd /home/firstuser/dev/source/bigbluebutton/bbb-commom-message
$ gradle jar
$ gradle uploadArchives
}}}

d)Build bigbluebutton-web 
{{{
$ cd /home/firstuser/dev/source/bigbluebutton/bigbluebutton-web
$ bbb-conf --setup-dev  web
$ gradle copyToLib
$ ant war
$ sudo /etc/init.d/tomcat6 stop
$ sudo rm –rf /var/lib/tomcat6/webapps/bigbluebutton*
$ sudo cp bigbluebutton-0.71dev.war  /var/lib/tomcat6/webapps/bigbluebutton.war
$ sudo touch /var/lib/tomcat6/webapps/bigbluebutton/demo/bbb_api_conf.jsp
$ sudo vi /var/lib/tomcat6/webapps/bigbluebutton/demo/bbb_api_conf.jsp
}}}
Add these lines to the file:
{{{
		<%
			String salt = “[securitySalt]”;
			String BigbluebuttonURL = “http:// [IP] /bigbluebutton/”;
		%>
}}}

{{{
$ sudo /etc/init.d/tomcat6 start
}}}

We can obtain  securitySalt from “/var/lib/tomcat6/webapps/bigbluebutton/WEB-INF/classes/bigbluebutton.properties”

e)Build bigbluebutton-apps
{{{
$ sudo /etc/init.d/red5 stop
$ cd /home/firstuser/dev/source/bigbluebutton/bigbluebutton-apps
$ bbb-conf --setup-dev  apps
$ gradle resolveDeps
$ gradle war deploy
$ sudo /etc/init.d/red5 start
}}}

f)Build bbb-video
{{{
$ cd /home/firstuser/dev/source/bigbluebutton/bbb-video
$ ant resolve
$ ant dist
$ ant deploy
}}}
g)Build bbb-voice
{{{
$ cd /home/firstuser/dev/source/bigbluebutton/bbb-voice
$ gradle resolveDependencies
$ gradle war deploy
}}}

h)Build deskshare
{{{
$ cd /home/firstuser/dev/source/bigbluebutton/deskshare
$ gradle copyToLib
$ cd app
$ gradle war deploy
$ cd ../applet
$ gradle jar
$ ant create-signing-key  ( if you haven’t create keypair yet )
$ ant sign-jar
$ cp build/libs/bbb-deskshare-applet-0.71.jar  ../../bigbluebutton-client/resources/prod
}}}

i)Build sipphone
{{{
$ cd /home/firstuser/dev/source/bigbluebutton/sipphone
$ ant build
$ ant sign-jar
$ cp dist/sip.jar  ../bigbluebutton-client/resources/prod/
}}}

j)Build bigbluebutton-client
{{{
$ cd /home/firstuser/dev/source/bigbluebutton/bigbluebutton-client
$ bbb-conf --setup-dev client
$ ant
}}}

k)Copy web to bigbluebutton-default
{{{
$ sudo cp –R /home/firstuser/dev/source/bigbluebutton/bigbluebutton-config/web/*  /var/www/bigbluebutton-default
}}}

l)Install bbb-voice-conference
{{{
$ sudo apt-get install bbb-voice-conference
$ sudo bbb-conf --conference konference
$ cd /home/firstuser/dev/source/bigbluebutton/bigbluebutton-apps
$ gradle war deploy
$ sudo bbb-conf –clean
$ sudo bbb-conf --check
}}}


*Note:* 
1.	If you can’t see listeners when the applet is launched, please reboot the server.
2.	If you cannot call the api to start or stop module or new user is redirect to a different room, it is because your bbb-common-message-0.7.jar is compiled in different time. To resolve this problem you have to recompile the bbb-common-message

$ cd /home/firstuser/dev/source/bigbluebutton/bbb-common-message
$ gradle jar

$ rm -f /usr/share/red5/webapps/bigbluebutton/WEB-INF/lib/bbb-common-message-0.7.jar
$ cp /home/firstuser/dev/source/bigbluebutton/bbb-common-message/build/libs/bbb-common-message-0.7.jar  /usr/share/red5/webapps/bigbluebutton/WEB-INF/lib/

$ rm –f /var/lib/tomcat6/webapps/bigbluebutton/WEB-INF/lib/bbb-common-message-0.7.jar
$ cp /home/firstuser/dev/source/bigbluebutton/bbb-common-message/build/libs/bbb-common-message-0.7.jar  /var/lib/tomcat6/webapps/bigbluebutton/WEB-INF/lib/

$ sudo service tomcat6 restart
$ sudo service red5 restart