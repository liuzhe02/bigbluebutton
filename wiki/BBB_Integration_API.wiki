#summary BigBlueButton Third-Party Integration API.

= WARNING: This page is a DRAFT. =

= Introduction =

This wiki outlines the API for integrating !BigBlueButton with other application.


== Creating a Conference ==
Method: POST

Required Parameter: voiceBridge

Request Format: text/xml, application/x-www-form-urlencoded, text/json

xml:
{{{

      POST http://<host>/bigbluebutton/api/conference.xml

   Param: 
          <?xml version="1.0" encoding="ISO-8859-1"?>
          <conference>
	      <voiceBridge>85115</voiceBridge>
          </conference>
Example:
Create file called create-conference.xml with following contents:

<?xml version="1.0" encoding="ISO-8859-1"?>
<conference>
  <voiceBridge>85115</voiceBridge>
</conference>

prompt> curl --verbose --request POST --header "Content-Type: text/xml" --data @create-conference.xml http://192.168.0.182/bigbluebutton/api/conference

Response:

  <response>
    <returncode>SUCCESS</returncode>
    <voiceBridge>85115</voiceBridge>
    <moderatorToken>57c05fcb-1005-454c-b5f0-ccdf6b8fd501</moderatorToken>
    <viewerToken>ede35174-bf99-433d-af68-fc64fd325dd6</viewerToken>
  </response>

}}}

url-encoded:
{{{
      POST http://<host>/bigbluebutton/api/conference.form

    Param: voiceBridge=85115

    POST http://<host>/bigbluebutton/api/conference.form?voiceBridge=85115

Example:

prompt> curl --verbose --request POST --header "content-type application/x-www-form-urlencoded" --data voiceBridge=85115 http://192.168.0.182/bigbluebutton/api/conference

Response:

  <response>
    <returncode>SUCCESS</returncode>
    <voiceBridge>85115</voiceBridge>
    <moderatorToken>57c05fcb-1005-454c-b5f0-ccdf6b8fd501</moderatorToken>
    <viewerToken>ede35174-bf99-433d-af68-fc64fd325dd6</viewerToken>
  </response>

}}}


json:
{{{
      POST http://<host>/bigbluebutton/api/conference.json
   	 	$.post("/bigbluebutton/api/conference.json", { voiceBridge: "85115"},
  			function(data){
    			alert("Data Loaded: " + data.voiceBridge + " " + data.moderatorToken + " " + data.viewerToken);
  			}, "json"
  		); 

}}}





== Example of creating a conference and joining that conference ==
*How it works*

 1. When the page gets loaded, a request (json) is sent to create the conference.
 1. When the response comes in, the values of the authToken hidden fields are changed with values for moderator and viewer tokens.
 1. The user enter's there name in the field for moderator or viewer then click Join.
 1. The user is then logged in and redirected into the BBB client to start up.

{{{
 <html>                                                                  
 <head>                                                                  
 <script type="text/javascript" src="/bigbluebutton/js/jquery-1.3.1.js"></script>          
 <script type="text/javascript">                                         
    $(document).ready(function() {   	
    	alert("Hello world! ");
   	 	$.post("/bigbluebutton/api/conference.json", { voiceBridge: "85115"},
  			function(data){
    			alert("Data Loaded: " + data.voiceBridge + " " + data.moderatorToken + " " + data.viewerToken);
    			
    			$("div:first").text(data.moderatorToken);
    			$("div:last").text(data.viewerToken);
    			$("input:first").val(data.moderatorToken);
    			$("input:last").val(data.viewerToken);
  			}, "json"
  		);  		
 	});   
 		
                               
 </script>                                                               
 </head>                                                                 
 <body>                                                                  
   <form action="/bigbluebutton/api/conference/session.html" method="post">
   <!-- IMPORTANT: Make this input the first one as script above relies on it's position to assign the moderatorToken value -->
   <input type="hidden" name="authToken" value="" />
    <table>
      <tbody>
        <tr>
          <td>Enter your name:</td>
          <td><input type="text" name="fullname" value="" /></td>
        </tr>
        <tr>
          <td />
          <td><input type="submit" value="Join as moderator" /></td>
        </tr>
      </tbody>
    </table>
  </form>    
     <form action="/bigbluebutton/api/conference/session.html" method="post">
     
    <table>
      <tbody>
        <tr>
          <td>Enter your name:</td>
          <td><input type="text" name="fullname" value="" /></td>
        </tr>
        <tr>
          <td />
          <td><input type="submit" value="Join as viewer" /></td>
        </tr>
      </tbody>
    </table>
    <!-- IMPORTANT: Make this input the last one as script above relies on it's position to assign the viewerToken value -->
    <input type="hidden" name="authToken" value="" />
  </form>       
  <div></div>
  <div></div>                           
 </body>                                                                 
 </html>

}}}