#summary How to install BigBlueButton 0.81-beta

= Introduction =

These instructions go through installing !BigBlueButton 0.81-beta.

Note: These instructions are draft and will be updated before the 0.81-beta release.

The requirements are

  * 4 GB of memory (4 GB is better)
  * Quad-core 2.6 GHZ CPU (or faster)
  * Ports 80, 1935, 9123 accessible
  * Port 80 is not used by another application
  * 500G of free disk space (or more) for recordings

These instructions assume you do not have a previous version of !BigBlueButton installed.  (The final release of 0.81 will update from 0.80.)


== 1. Update your server == 

You first need to give your server access to the !BigBlueButton package repository for 0.81.

In a terminal window, copy and paste the following commands.

{{{
# Add the BigBlueButton key
wget http://ubuntu.bigbluebutton.org/bigbluebutton.asc -O- | sudo apt-key add -

# Add the BigBlueButton repository URL and ensure the multiverse is enabled
echo "deb http://ubuntu.bigbluebutton.org/XXX/ bigbluebutton-lucid main" | sudo tee /etc/apt/sources.list.d/bigbluebutton.list
echo "deb http://us.archive.ubuntu.com/ubuntu/ lucid multiverse" | sudo tee -a /etc/apt/sources.list

}}}

Note:   At the time of writing, the packages are unstable.  The XXX will updated when the beta repository is ready.  


After you've made the above changes, do a dist-upgrade to ensure your running the latest packages and your server is up-to-date before installing !BigBlueButton.

{{{
sudo apt-get update
sudo apt-get dist-upgrade

}}}

If you've not updated in a while, apt-get may recommend you reboot your server after `dist-upgrade` finishes.  Do the reboot before proceeding to the next step.

== 2. Install Ruby == 
The record and playback infrastructure uses Ruby for the processing of recorded sessions.  

First, you'll need to install the following dependencies to compile ruby.

{{{
sudo apt-get install zlib1g-dev libssl-dev libreadline5-dev libyaml-dev build-essential bison checkinstall libffi5 gcc checkinstall libreadline5 libyaml-0-2

}}}

Next, create a file called `install-ruby.sh` and copy and paste in the following script.

{{{
#!/bin/bash
cd /tmp
wget http://ftp.ruby-lang.org/pub/ruby/1.9/ruby-1.9.2-p290.tar.gz
tar xvzf ruby-1.9.2-p290.tar.gz
cd ruby-1.9.2-p290
./configure --prefix=/usr\
            --program-suffix=1.9.2\
            --with-ruby-version=1.9.2\
            --disable-install-doc
make
sudo checkinstall -D -y\
                  --fstrans=no\
                  --nodoc\
                  --pkgname='ruby1.9.2'\
                  --pkgversion='1.9.2-p290'\
                  --provides='ruby'\
                  --requires='libc6,libffi5,libgdbm3,libncurses5,libreadline5,openssl,libyaml-0-2,zlib1g'\
                  --maintainer=brendan.ribera@gmail.com
sudo update-alternatives --install /usr/bin/ruby ruby /usr/bin/ruby1.9.2 500 \
                         --slave /usr/bin/ri ri /usr/bin/ri1.9.2 \
                         --slave /usr/bin/irb irb /usr/bin/irb1.9.2 \
                         --slave /usr/bin/erb erb /usr/bin/erb1.9.2 \
                         --slave /usr/bin/rdoc rdoc /usr/bin/rdoc1.9.2
sudo update-alternatives --install /usr/bin/gem gem /usr/bin/gem1.9.2 500

}}}

Next, run the script

{{{
chmod +x install-ruby.sh
./install-ruby.sh
}}}

After the install finishes, type `ruby -v`.  You should see the ruby interpreter output `1.9.2p290` (or later). 

{{{
$ ruby -v
ruby 1.9.2p290 (2011-07-09 revision 32553)
}}}

Next type `gem -v`.
{{{
$ gem -v
1.3.7
}}}

Finally, to make sure you can install gems, type `sudo gem install hello` (!BigBlueButton does not need the gem hello; rather, we're just testing to makes sure gem is working properly).

{{{
$ sudo gem install hello
Successfully installed hello-0.0.1
1 gem installed
Installing ri documentation for hello-0.0.1...
Installing RDoc documentation for hello-0.0.1...
}}}

Make sure you can execute the above three commands without errors before continuing with these instructions.  If you do encounter errors, please post to [http://groups.google.com/group/bigbluebutton-setup/topics?gvc=2&pli=1 bigbluebutton-setup] and we'll help you resolve the errors.

You might be wondering why not use the default Ruby packages for Ubumtu 10.04?  Unfortunately, they are out of date.  Thanks to [http://threebrothers.org/brendan/blog/ruby-1-9-2-on-ubuntu-11-04/ Brendan Ribera] for the above script for installing the latest ruby on Ubuntu 10.04 as a package.

== 3.  Install ffmpeg ==
!BigBlueButton uses ffmpeg to process video files for playback.  To install ffmpeg, do the following

{{{
        sudo apt-get install build-essential git-core checkinstall yasm texi2html libfaac-dev libopencore-amrnb-dev libopencore-amrwb-dev libsdl1.2-dev libtheora-dev libvorbis-dev libx11-dev libxfixes-dev libxvidcore-dev zlib1g-dev --yes


        # Setup libvpx
        if [ ! -d /usr/local/src/libvpx ]; then
                cd /usr/local/src
                sudo git clone http://git.chromium.org/webm/libvpx.git
                cd libvpx
                sudo ./configure
                sudo make
                sudo make install
        fi

        cd /usr/local/src
        sudo git clone git://git.videolan.org/ffmpeg
        cd ffmpeg
        sudo git checkout n0.8.1
        sudo git checkout -b n0.8.1
        sudo ./configure  --enable-version3 --enable-postproc  --enable-libopencore-amrnb --enable-libopencore-amrwb --enable-libtheora --enable-libvorbis  --enable-libvpx
        sudo make
        sudo checkinstall --pkgname=ffmpeg --pkgversion="5:$(./version.sh)" --backup=no --deldoc=yes --default
}}}



== 4.  Install !BigBlueButton == 
We're now ready to install !BigblueButton. Type

{{{
   sudo apt-get install bigbluebutton
}}}


This single command is where all the magic happens.  This command installs *all* of !BigBlueButton components with their dependencies.  Here's a screen shot of the packages it will install. 

http://bigbluebutton.googlecode.com/svn/trunk/bbb-images/install_ubuntu_08/apt-get-install.png

Type 'y' and press Enter.  The packaging will do all the work for you to install and configure your !BigBlueButton server.

If you are behind a HTTP Proxy, you will get an error from the package bbb-record-core.  You can resolve this by [#Unable_to_install_gems manually installing the gems].

== 5. Install API Demos ==

To interactively test your !BigBlueButton server, you can install a set of API demos.  

{{{
   sudo apt-get install bbb-demo
}}}

You'll need the bbb-demo package installed if you want to join the Demo Meeting from your !BigBlueButton server's welcome page.  This is the same welcome page you see at [http://demo.bigbluebutton.org our demo server].

Later on, if you wish to remove the API demos, you can enter the command

{{{
   sudo apt-get purge bbb-demo
}}}

== 6. Do a Clean Restart == 

To ensure !BigBlueButton has started cleanly, enter the following commands:

{{{
   sudo bbb-conf --clean
   sudo bbb-conf --check
}}}

The `--clean` option will clear out all the log files for !BigBlueButton.  The `--check` option will grep through the log files looking for errors.  

The output from `sudo bbb-conf --check` will display your current settings and, after the text, "** Potential problems described below **", print any potential configuration or startup problems it has detected.  

