#summary How to run Red5Phone within BigBlueButton server

= Introduction =

This page provides steps to run [http://code.google.com/p/red5phone/ Red5Phone], the workarounds, as well as observations/findings.

= Steps =

 # Checkout bigbluebutton-server
 # Create a distribution
   {{{
     > ant dist
   }}}
 # Copy dist directory to another directory
   {{{
     > cp dist c:/temp
   }}}
 # Rename dist to wrapper. SIPUser.java assumes a "/wrapper" directory where red5 is ran.
   {{{
       SIPUser.java

	public SIPUser(String sessionID, IConnection service, int sipPort, int rtpPort) throws IOException {
		p("SIPUser Constructor: sip port " + sipPort + " rtp port:" + rtpPort);

		try {

			String appPath = System.getProperty("user.dir");
			appPath = appPath.substring(0, (appPath.length() - 8));   // removing /wrapper sub folder from path

			configFile = appPath + "/webapps/sip/sip.cfg";

			this.sessionID = sessionID;
			this.service = service;
			this.sipPort = sipPort;
			this.rtpPort = rtpPort;

			sipInputStream = new PipedInputStream();
			rtmpOutputStream = new PipedOutputStream(sipInputStream);

		}  catch (Exception e) {
			p("SIPUser constructor: Exception:>\n" + e);

		}
	}
   }}}

 # Replace jetty (hotfix)
    * http://osflash.org/red5/070hotfix
    * http://red5.googlecode.com/svn/repository/jetty/
 # Edit red5.bat
 # Edit logback.xml
 # Port 5070