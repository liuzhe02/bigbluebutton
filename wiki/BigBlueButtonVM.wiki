#summary How to setup your own BigBlueButton Virtual Machine

<wiki:toc max_depth="2" />

= Quick Start =
  # Download the latest VM: [http://bigbluebutton.org/downloads/bigbluebutton-vm.zip bigbluebutton-vm.zip].
  # While it's downloading, grab some popcorn and watch this installation video: [http://bigbluebutton.org/sites/all/videos/bbb-vm/index.html Setting up a BigBluebutton VM]. (10 minutes)
  # Follow the instructions below.

== Background ==

Many universities and colleges have told us they wanted to run their own version BigBlueButton behind their firewall.  In addition, our developers have asked to shorten the edit-compile-check cycle when extending BigBlueButton.

In response to these requests, we've created a Ubuntu-based virtual machine (VM) that makes it easy for anyone to download and run a BigBlueButton server.  The VM runs under VMWare Player, which is available on Unix, Windows, or Mac. This VM is also a full command-line development environment -- it's preconfigured to check out code from BigBlueButton Google Code repository, make local changes, and, with a single command, re-compile the code and see it run in your VM.
  
Prerequisites:
  * VMWare Player (or VMWare Workstation) for Windows or Unix, or VM Fusion for Mac
  * VMWare Fusion for Mac
  * Ability for the VM to acquire an IP address through DHCP on boot

== Setup ==

  1.  If you haven't already done so, download and uncompress the latest [http://bigbluebutton.org/downloads/bigbluebutton-vm.zip bigbluebutton-vm.zip]

  2.  Uncompress bigbluebutton-vm.zip and open the enclosed *ubuntu-vmw6* folder.

http://bigbluebutton.googlecode.com/svn/trunk/bbb-images/vm/vm_icons.png

  3.  Double-click on the bigbluebutton-vm.vmx icon.  This will start VMWare Player (or VMWare Workstation).

The BigBlueButton VM takes about 10 minutes to first initialize.  Sit back, relax, go watch some youtube videos.  During this time, the BigBlueButton VM goes through an initial startup script that 

  * Installs a software timer for Asterisk (this allows you to use a VoIP phone to connect)
  * Installs the BigBlueButton packages
  * Configures BigBlueButton to use the VM's current IP address
  * Installs OpenSSH

When it's done, you'll see a message that asks you to login and change the password.

http://bigbluebutton.googlecode.com/svn/trunk/bbb-images/vm/vm_boot.png

The VM has a default account called *firstuser*, with password *default*.  To secure your server, take a moment to login as firstuser.  After you enter the password, you'll be be immediately asked to enter the the password again and then enter a new password.  

After resetting the default password, you'll get the following welcome message each time you login as firstuser.

http://bigbluebutton.googlecode.com/svn/trunk/bbb-images/vm/vm-welcome.png

== Running BigblueButton ==

At this point, you've got a full BigBlueButton server up and running.  Open a web browser to the URL provided in the login message for first user.  
  
http://bigbluebutton.googlecode.com/svn/trunk/bbb-images/vm/vm-join.png

Click the Join button and you'll be prompted to join the default conference 85115.  Enter whatever name you like and then *mp* for moderator password, or *ap* for attendee password.

http://bigbluebutton.googlecode.com/svn/trunk/bbb-images/vm/vm-bbb-running.png

== Updating the BigBlueButton VM == 

All the BigBlueButton components are installed as Ubuntu packages that are automatically built by our [http://bigbluebutton.org/hudson continuous integration server] from the head of the BigBlueButton Google Code repository.

When this VM was assembled, it was using the latest packages.  However, BigBlueButton is under active development and these packages are updating frequently. 

To update the VM with the latest components, do the following.

Login as firstuser (using your password of course!) and enter the following commands:
{{{
  # apt-get update
  # apt-get upgrade
}}}

http://bigbluebutton.googlecode.com/svn/trunk/bbb-images/vm/vm-apt-get-upgrade.png

== Modifying BigBlueButton == 

We've included all the development tools in this VM to compile and deploy the source for bigbluebutton-client, bigbluebutton-web, and bigbluebutton-apps. What are these components?  Take a moment and watch the [http://bigbluebutton.org/sites/all/videos/arch_overview/index.html BigBlueButton overview video].


=== Change IP address of BigBlueButton Server ===

The VM will automatically setup BigBlueButton components to use the IP address on first boot.  If you need to change the IP address of the server, we've provided a utility to let you change the configuration files for BigBlueButton to use the new IP address.

For example, to change the IP address for BigBlueButton configuration files to use 192.168.0.125, do the following

{{{

  $ sudo bbb-setip -h 192.168.0.125

}}}

If you want to change the default port as well, for example to have BigBlueButton listen on port 8000 (instead of 80), do the following

{{{

  $ sudo bbb-setip -h 192.168.0.125 -p 8000

}}}

=== Setup Development Environment ===

To setup your development environment we've included some helper scripts.  If you type

{{{

  $ bbb-setupdev -s

}}}

This script will setup samba (Unix implementation of windows file sharing) to let you access files in firstuser from within Windows or Mac.

Next, type

{{{
   $ bbb-setupdev -d
}}}

This will checkout the main components of BigBlueButton into a corresponding directory.

# bigbluebutton-dev
# bigbluebutton-client
# bigbluebutton-apps

You're now ready to starting editing, compiling, and deploying your own versions of these components to the virtual machine.  All the necessary development tools have been installed.

To make it easy to compile and deploy, each directory has a script called `build.sh` that will first un-install the associated component's Ubuntu package (so you can run your own version of that component), then recompile the component, copy it to the appropriate directory, and restart the associated servers.  

For example, if you go into the bigbluebutton-apps directory and type

{{{
   $ ./build.sh
}}}

this script will uninstall the package bbb-apps, compile the local copy of BigBlueButton-apps using groovy and grails, then deploy the resulting war file to the tomcat server.