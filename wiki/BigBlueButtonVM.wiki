#summary How to setup your own BigBlueButton Virtual Machine

<wiki:toc max_depth="2" />

= How to setup your own !BigBlueButton Server in a few minutes =

Many universities and colleges have told us they wanted to run their own version  !BigBlueButton behind their firewall.  In addition, our developers have asked us for ways to shorten the edit-compile-check cycle when extending  !BigBlueButton.

In response to these requests, we've created a Ubuntu-based virtual machine (VM) that makes it easy for anyone to download and run a  !BigBlueButton server.  The VM runs under VMWare Player, which is available on Unix, Windows, or Mac.  This VM is also a full [Developing_BigBlueButton development environment] -- it's preconfigured to check out code from !BigBlueButton Google Code repository, make local changes, and, with a single command, re-compile the code and see it run in your VM.  

Let's get a !BigBlueButton VM going.  

Prerequisites:
  * VMWare Player (or VMWare Workstation) for Windows or Unix, or VM Fusion for Mac
  * A DHCP Server for the VM to acquire an IP address on boot
  * The VM must be able to connect to the internet to update packages

== Installing !BigBlueButton VM  ==

  1.  Download and uncompress the [http://bigbluebutton.org/downloads/bigbluebutton-vm-2010-01-25.zip BigBlueButton 0.63 VM] 

  2.  Open the enclosed *ubuntu-vmw6* folder.

http://bigbluebutton.googlecode.com/svn/trunk/bbb-images/vm/vm_icons.png

  3.  Double-click on the bigbluebutton-vm.vmx icon.  

This will start VMWare Player (or VMWare Workstation) and boot the VM. Note: In VMWare, make sure the networking is set to *Bridged*, not NAT.  

The !BigBlueButton VM takes about 10 minutes to first initialize.  Sit back, relax, go watch some youtube videos.  During this time, the !BigBlueButton VM goes through its initial startup script that 

  * Sets up the networking (acquire an IP address from a DHCP server)
  * Installs the  !BigBlueButton packages
  * Configures  !BigBlueButton to use the VM's current IP address
  * Installs OpenSSH

When it's done, you'll see a welcome message that asks you to login and change the password.

http://bigbluebutton.googlecode.com/svn/trunk/bbb-images/vm/vm_boot.png

The VM is setup to have a default account called *firstuser* with password *default*.  To secure your server, take a moment to login and change this password.

To change the password, login as firstuser and provide the default password.  You'll immediately be asked to enter the password again, then to provide a new password.  Again, do this now as it will secure your server.  

After resetting the default password, you'll get the following welcome message (this appears each time you login as firstuser).

http://bigbluebutton.googlecode.com/svn/trunk/bbb-images/vm/vm-welcome.png

Note: Due to an upgrade to OpenOffice 3.2, you'll need to restart the VM after this first boot sequence to have OpenOffice properly running for document conversation.  The next time the VM starts everything will be working properly.

== Installing the !BigBlueButton VM using VirtualBox ==

As an alternative to using VMWare player, you can use VirtualBox to run the VMWare images.  VirtualBox has more features than VMWare Player including snapshots and guest OS additions which are very useful for running Ubuntu in desktop mode.

What you need:
 [http://bigbluebutton.org/downloads/bigbluebutton-vm-2010-01-25.zip BigBlueButton 0.63 VM]
 [http://www.virtualbox.org/wiki/Downloads VirtualBox]

1. Create a new VirtualBox VM
http://bigbluebutton.googlecode.com/svn/trunk/bbb-images/FAQ/step01.jpg

2. Name it and select Linux and Ubuntu for OS and Distribution
http://bigbluebutton.googlecode.com/svn/trunk/bbb-images/FAQ/step02.jpg

3. Set memory size
http://bigbluebutton.googlecode.com/svn/trunk/bbb-images/FAQ/step03.jpg

4. Use an existing disk, the one for BigBlueButton VM
http://bigbluebutton.googlecode.com/svn/trunk/bbb-images/FAQ/step04.jpg

5. Click Add
http://bigbluebutton.googlecode.com/svn/trunk/bbb-images/FAQ/step05.jpg

6. Select the BigBlueButton .vmdk file which you downloaded
http://bigbluebutton.googlecode.com/svn/trunk/bbb-images/FAQ/step06.jpg

7. Click select
http://bigbluebutton.googlecode.com/svn/trunk/bbb-images/FAQ/step07.jpg

8. Click start to run
http://bigbluebutton.googlecode.com/svn/trunk/bbb-images/FAQ/step08.jpg


== Running the !BigBlueButton VM ==

At this point, you've got a full !BigBlueButton server up and running.  Open a web browser to the URL provided using the IP address of the VM.  
  
http://bigbluebutton.googlecode.com/svn/trunk/bbb-images/vm/vm-join.png

Enter whatever name you like and then click Join.  You'll join the default meeting.

http://bigbluebutton.googlecode.com/svn/trunk/bbb-images/vm/vm-bbb-running.png

== Developing !BigBlueButton == 

We've included all the development tools in this VM to compile and deploy the source for bigbluebutton-client, bigbluebutton-web, and bigbluebutton-apps. See [http://code.google.com/p/bigbluebutton/wiki/Developing_BigBlueButton developing BigBlueButton] for more information.


== How to install desktop sharing ==
Desktop sharing is now a separate component.  Don't worry, you can install it with a single apt-get command. Please see [http://code.google.com/p/bigbluebutton/wiki/InstallingDesktopSharing how to install desktop sharing] and why doing so changes the licensing of !BigBlueButton.


= Upgrading the !BigBlueButton VM =



== How to upgrade to the next release == 

This is where packages make life easy.

The !BigBlueButton components are installed as Ubuntu packages.  The VM already has apt configure to check the repository http://archive.bigbluebutton.org for updates.  This means, when we ship !BigBlueButton 0.64 (for example), you'll be able to upgrade your server with two commands.

{{{
  # sudo apt-get update
  # sudo apt-get dist-upgrade
}}}

When you run these commands, you'll see BigBlueButton download a packages for the new release.  You may be prompted to update an existing configuration file.

*Note*: Best to always check the [http://code.google.com/p/bigbluebutton/wiki/ReleaseNotes release notes] for specific instructions to upgrade to a new release.

When updating, you'll see the upgrade messages.

http://bigbluebutton.googlecode.com/svn/trunk/bbb-images/vm/vm-apt-get-upgrade.png

== Updating the !BigBlueButton VM to packages on trunk (aka Living on the Edge) == 

We upgrade the repository http://archive.bigbluebutton.org with every release.  In addition, during each iteration of BigBlueButton, we have our [http://bigbluebutton.org/hudson continuous integration server Hudson] automatically updating packages off of the SVN tree in Google Code.

These packages are used to update our [http://devbuild.bigbluebutton.org devbuild server], so you can always try out the latest version.  Keep in mind that trunk isn't always going to be stable, so devbuild will be as stable as trunk.

However, if you want to live on the edge and use the latest packages built by our from the trunk of the !BigBlueButton Google Code repository, then edit `/etc/apt/sources.list.d/bigbluebutton.list` and change

{{{
#
# Repository for BigBlueButton
#
deb http://archive.bigbluebutton.org/ bigbluebutton main
}}}

to
{{{
#
# Repository for BigBlueButton
#
deb http://archive.bigbluebutton.org/dev bigbluebutton main
}}}

Do an `apt-get update/apt-get dist-upgrade` and you'll be running the latest builds, which are not guaranteed to be stable, but you can see what's happing in the current itteration.




= Troubleshooting =

== Use bbb-conf ==

Starting with !BigBlueButton 0.63, we've added logic to bbb-conf to check your current environment for possible problems that might prevent !BigBlueButton from running.  

Type 

{{{

   bbb-conf -c

}}}

You should see output such as 

{{{ 
root@bbb-vm-20100102:/etc/asterisk# bbb-conf -c
Current Configuration:

/var/www/bigbluebutton/client/conf/config.xml (bbb-client)
                 IP for tunnel check: 192.168.0.163
                  IP for rtmp (red5): 192.168.0.163
          host for bbb-web interface: 192.168.0.163

/etc/nginx/sites-available/bigbluebutton (configuration file nginx)
                         server_name: 192.168.0.163
                                port: 80
                client document root: /var/www/bigbluebutton

/var/lib/tomcat6/webapps/bigbluebutton/WEB-INF/classes/bigbluebutton.properties (bbb-web)
                                host: 192.168.0.163

/var/lib/tomcat6/webapps/bigbluebutton/demo/bbb_api_conf.jsp (API demos)
                                host: 192.168.0.163

/etc/asterisk/bbb_extensions.conf (asterisk)
                   conference module: konference

}}}

If there are any problems (i.e. if bbb-conf detects that red5 isn't running), you'll see a warning message at the bottom.

If you need to restart BigBlueButton, do the command

{{{

   bbb-conf --clean

}}}

and this will do a clean restart.  If you've tried both the above commands and your BigBlueButton server is not working, please post to our [http://groups.google.com/group/bigbluebutton-dev/topics?gvc=2 forums].  

== Change IP address of  !BigBlueButton Server ==

The VM will automatically setup  !BigBlueButton components to use the IP address on first boot.  If you need to change the IP address of the server, we've provided a utility to let you change the configuration files for  !BigBlueButton to use the new IP address.

For example, to change the IP address for  !BigBlueButton configuration files to use 192.168.0.125, do the following

{{{

  $ sudo bbb-conf --setip 192.168.0.125

}}}