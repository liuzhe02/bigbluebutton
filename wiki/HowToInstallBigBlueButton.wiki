#summary How to setup your own BigBlueButton Server (Windows)

** Draft **

= Overview =
There are two main parts to setting up your own BigBlueButton server: 
* Creating an Asterisk server (you can use your existing server if you already have one setup)
* Setting up the components for the application server.

The Application server runs Red5, Tomcat, and ActiveMQ, and serves up the BigBlueButton Flash client.  The Asterisk server provides the voice conferencing.  

= Setting up the BigBlueButton Server =
While these instructions below are for Windows, there is no specific requirement for BigBlueButton for machine or OS. If your machine is running Windows XP (or above) and has at least 1GB of memory you're good to go.

Before you begin installation, you'll need to create some directories.

== Create Directories ==
 1. Create {{{c:\tools}}} - will be referred to as {{{TOOLS_DIR}}} for the rest of this document.  For example, if this document says "Set an environment variable to {{{TOOLS_DIR\apache-ant-1.7.0}}}", you would set it to {{{c:\tools\apache-ant-1.7.0}}}.
 1. Create {{{c:\source\client}}} - will be referred to as {{{CLIENT_DIR}}} for the rest of this document
 1. Create {{{c:\source\server}}} - will be referred to as {{{SERVER_DIR}}} for the rest of this document
 1. Create {{{c:\temp}}} - will be referred to as {{{TEMP}}} for the rest of this document.  
 
You'll also need to know the host name, referred to as {{HOSTNAME}}, for your server.


== Download and Install Software ==
Note
* Some of the version numbers may differ -- download the latest versions.


=== Java Development Kit ===
 1. Download [http://java.sun.com/javase/downloads/index.jsp JDK 6] installer
 1. Install into {{{TOOLS_DIR}}} - e.g. {{{TOOLS_DIR\jdk1.6.0_06}}}
 1. Click {{{Start -> Control Panel -> System -> Advanced tab -> Environment Variables}}} on your computer.
 1. Add {{{JAVA_HOME}}} in your system variables - e.g {{{JAVA_HOME = TOOLS_DIR\jdk1.6.0_06}}}
 1. Open a command prompt and run {{{java -version}}}. You should see the java version displayed.

=== Ant ===
 1. Download the [http://ant.apache.org Ant] ZIP file.
 1. Uncompress the ZIP file into {{{TOOLS_DIR}}} - e.g. {{{TOOLS_DIR\apache-ant-1.7.0}}}.
 1. Click {{{Start -> Control Panel -> System -> Advanced tab -> Environment Variables}}} on your computer.
 1. Add {{{ANT_HOME}}} in your system variables - e.g {{{ANT_HOME = TOOLS_DIR\apache-ant-1.7.0}}}
 1. Add {{{ANT_HOME\bin}}} to your PATH - e.g. {{{TOOLS_DIR\apache-ant-1.7.0\bin}}}.
 1. Open a command prompt and run {{{ant -version}}}.  You should see the ant version displayed.

=== Tomcat ===
 1. Download [http://tomcat.apache.org Tomcat] ZIP file
 1. Uncompress the ZIP file into {{{TOOLS_DIR}}} - e.g. {{{TOOLS_DIR\apache-tomcat-6.0.16}}}
 1. Open a command prompt and cd to {{{TOOLS_DIR\apache-tomcat-6.0.16}}}
 1. Run {{{bin\catalina.bat start}}}
 1. Open your browser and go to {{{http://HOSTNAME:8080}}}
 1. You should see the Tomcat welcome page displayed.

=== ActiveMQ ===
 1. Download [http://activemq.apache.org ActiveMQ]
 1. Install activeMQ in {{{TOOLS_DIR}}} - e.g. {{{TOOLS_DIR\activemq-5.1.0}}}
 1. Open a command prompt and cd to {{{TOOLS_DIR\activemq-5.1.0}}}
 1. Run {{{bin\activemq}}}
 1. You should set the AcitveMQ startup messages with no errors.

=== SWF Tools and PDF Toolkit===
 1. Download [http://www.swftools.org SWF Tools]
 1. Download [http://www.accesspdf.com/pdftk PDF Toolkit]
 1. Install in {{{TOOLS_DIR\swftools}}}
 1. Add {{{SWFTOOLS_HOME = TOOLS_DIR\swftools}}} in you environment variables
 1. Add {{{SWFTOOLS_HOME}}} to your PATH


= Setting up the Asterisk Server =

== Asterisk ==
You'll need to setup an asterisk server (likely on a separate machine).
 1. Download and install the latest version of Asterisk from [http://www.asterisk.org/downloads Asterisk website].
 1. Configure Asterisk using the [http://blindside.googlecode.com/svn/trunk/asterisk sample conf] files on the BigblueButton repository

You'll need to setup a username and password for the Asterisk Management Interface (ami).  You'll also need the host name for this server, referred to hereafter as {{{ASTERISK_HOSTNAME}}}.

= Checking out the BigBlueButton Components =

== Checkout code ==
 1. Checkout bigbluebutton-server from [http://code.google.com/p/bigbluebutton/source/browse code repository] into {{{SERVER_DIR}}}.
 1. Checkout bigbluebutton-servlet from [http://code.google.com/p/bigbluebutton/source/browse code repository] into {{{SERVER_DIR}}}.
 1. Download and unzip the latest client from [http://code.google.com/p/bigbluebutton/downloads/list Downloads] into the tomcat webapps directory
 1. Uncompress the client to the {{{SERVER_DIR\bigbluebutton-server\webapps}}} folder.
 1. Edit {{{SERVER_DIR\bigbluebutton-server\webapps\bbbclient-release\BigBlueButton.html}}} and change the value of {{{localhost}}} with your HOSTNAME.  For example, if your HOSTNAME was 192.168.0.104, you would change
  *    so.addVariable("red5Host", "localhost");
  *    so.addVariable("presentationHost", "localhost:8080");
to
  *    so.addVariable("red5Host", "192.168.0.104");
  *    so.addVariable("presentationHost", "192.168.0.104:8080");


== Running BigBlueButton ==
 1. Edit {{{SERVER_DIR\bigbluebutton-servlet\war\WEB-INF\bigbluebutton.properties}}}.
  * swftoolLocation=c:/tools/pdf2swf (Edit to point to your pdf2swf executable)
  * pdfExtractor=c:/tools/pdftk (Edit to point to your pdftk executable)
  * presBaseDirectory=c:/temp/upload (directory where uploaded slides are extracted)
  * extractedFolder=extracted
 1. Edit {{{SERVER_DIR\bigbluebutton-server\webapps\astmeetme\WEB-INF\astmeetme.properties}}} with your Asterisk Management Interface (AMI) values.
  * These properties are for Asterisk Management Interface (AMI)
  * ami.host=ASTERISK_HOSTNAME
  * ami.port=5038
  * ami.username=<your_ami_username>
  * ami.password=<your_ami_password>

=== Build BigBlueButton WAR file ===
 1. Open a new command window.
 1. Change directory to {{{SERVER_DIR\bigbluebutton-server}}} 
 1. Edit {{{SERVER_DIR\bigbluebutton-server\webapps\conference\conferences\conferences.xml}}} to create conference rooms. Make sure <name> has an equivalent entry in your Asterisk's {{{meetme.conf}}} file.
	<conference-room>
	    <name>85101</name>
	    <mod-password>modpass</mod-password>
	    <view-password>viewpass</view-password>
	</conference-room>
 1. Type {{{ant server}}} to build the BigBlueButton WAR file.  This will build {{{bigbluebutton.war}}}.


=== Deploy WAR file to Tomcat server
 1. Open a new command window.
 1. Change directory to {{{SERVER_DIR\tomcat-5.1.0}}} 
 1. copy {{{bigbluebutton.war}}} to {{{SERVER_DIR\tomcat-5.1.0\webapps}}} to deploy it to your Tomcat server.

=== Start ActiveMQ ===
 1. Open a command window and start ActiveMQ.
 1. Open another command window and start Tomcat.

=== Try to open the BigBlueButton client.
 1. Using a web browser, open the URL http://HOSTNAME/bbbclient-release/BigBlueButton.html.

Try uploading a PDF file for conversion or opening multiple clients and chatting between them.