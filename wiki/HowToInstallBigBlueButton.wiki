#summary How to setup your own BigBlueButton Server (Windows)

= Overview =
These instructions show you how to install BigBlueButton on a Windows XP/Vista computer.  BigBlueButton can be installed on a Mac or Unix computer as well (we'll be adding instructions for installing on Unix shortly).  If you computer is running XP/Vista with at least 1GB of memory and 8GB free disk space, you're good to go.

There are three core servers needed to run BigBlueButton:
  * bigbluebutton server (built on red5)
  * asterisk server
  * tomcat server

You'll also need to install an Asterisk server for integrated voice conference.  However, for the moment, we'll just cover the above servers.  That's enough to get you running with sharing of slides, video, and chat.

For the tomcat server, there are two additional components to install:
  * bigbluebutton.war -- a Java application that handles the upload of slides
  * client -- the HTML files (including the flash SWF) files for the BigBlueButton client
  
For bigbluebutton.war, it uses two supporting command-line applications  to convert PDF slides to SWF images:
  * pdftk (breaks up PDF files into individual pages)
  * pdf2swf (converts a PDF file to SWF)

Here's an overview of how these components work together.

http://present.carleton.ca:8080/files/docs/images/bbb-overview.png

= Before you begin =

First, you'll need to create some directories.  These instructions use the {{{c:}}} drive, but you can use any drive for installation.

  1. Create {{{c:\tools}}} (referred as {{{TOOLS_DIR}}})
 
  1. Create {{{c:\temp}}}  (referred as {{{TEMP_DIR}}})  

We'll use {{{TOOLS_DIR}}}) and {{{TEMP_DIR}}}) through these instructions.  For example, to point the variable {{{JAVA_HOME}}} to {{{TOOLS_DIR\jdk}}}, you would define it as {{{c:\tools\jdk}}}.
 
Also, you will need to know the host name (or IP address) of your computer (referred to as {{{HOSTNAME}}}).  This could be a fully qualified domain name, such as mycomputer.network.com, or an IP address, as 192.168.0.150.

Enough intro -- let's get installing.

== Install Base Open Source Applications ==
For the downloads below, just grab the latest version of each open source application.  If your computer already has the application installed, such as tomcat, you can skip that step.


=== Java Development Kit ===

  1. Download the [http://java.sun.com/javase/downloads/index.jsp JDK 6] (not the JRE) installer
  1. Install the JDK to {{{TOOLS_DIR}}} - e.g. {{{TOOLS_DIR\jdk}}}
  1. Click {{{Start -> Control Panel -> System -> Advanced tab -> Environment Variables}}} on your computer.
  1. Add a system variable {{{JAVA_HOME}}} pointing to {{{JAVA_HOME = TOOLS_DIR\jdk}}} (i.e. {{{c:\tools\jdk}}})
  1. Open a command prompt and run {{{java -version}}}. You should see the java version (JDK 1.6 or above) displayed.


=== ActiveMQ ===

  1. Download [http://activemq.apache.org ActiveMQ] version 5.2.0
  1. Install ActiveMQ in {{{TOOLS_DIR}}} - e.g. {{{TOOLS_DIR\activemq}}}
  1. Open a command prompt and {{{cd}}} to {{{TOOLS_DIR\activemq\bin\win32}}}
  1. Run {{{activemq.bat}}}
  1. You should set the AcitveMQ startup messages with no errors.


=== Tomcat ===
  1. Download [http://tomcat.apache.org Tomcat] version 6 ZIP file
  1. Uncompress the ZIP file into {{{TOOLS_DIR}}} - e.g. {{{TOOLS_DIR\tomcat}}}
  1. Open a command prompt and {{{cd}}} to {{{TOOLS_DIR\tomcat\bin}}}
  1. Run {{{catalina.bat start}}}
  1. Open your browser and go to {{{http://HOSTNAME:8080}}}
  1. You should see the Tomcat welcome page displayed.

Note: Tomcat installs on port 8080 by default.  You can, of course, change tomcat's settings to listen on port 80.  If you change the settings, you can omit the port 8080 qualifier from the rest of these instructions.


=== SWF Tools and PDF Toolkit ===
  1. Download the latest version of [http://www.swftools.org SWF Tools]
  1. Install in {{{TOOLS_DIR\swftools}}}
  1. Download the latest version of [http://www.accesspdf.com/pdftk PDF Toolkit]
  1. Install in {{{TOOLS_DIR\pdftk}}}

If you've been following step-by-step, at this point your TOOLS_DIR looks like

http://bigbluebutton.googlecode.com/svn/trunk/bbb-images/install_win/folders_layout.png


OK, let's start installing the BigBlueButton specific components.



== Install BigBlueButton Client ==

First, let's download the BigBlueButton client by grabbing the latest version from the Google Code downloads.

  1. Download the latest [http://code.google.com/p/bigbluebutton/downloads/list client-0.35u.zip] ZIP file
  1. Unzip the client into {{{TOOLS_DIR\tomcat\webapps\ROOT}}} (place the {{{bin}}} directory containing the client here). 
  1. Rename the ROOT\bin directory to ROOT\client
 
If youâ€™ve left the tomcat server running, you should be able to open http://HOSTNAME:8080/client/BigBlueButton.html and see the login screen.  

http://bigbluebutton.googlecode.com/svn/trunk/bbb-images/install_win/first_login_prompt.png

Note, you won't be able to login yet -- there's no Red5 server running yet for the Flash client to connect.


== Install BigBlueButton Server ==

The BigBlueButton server is the Red5 server with some additional applications. 

We've packaged up a slimmed-down version of the Red5 server.  
  1. Download bbb-server-0.35u.zip from  [http://code.google.com/p/bigbluebutton/downloads/list] and put in {{{TOOLS_DIR\bbb-server}}}. 
  1. Download bigbluebutton-apps-0.35u.zip from from  [http://code.google.com/p/bigbluebutton/downloads/list] and extract it in {{{TOOLS_DIR\bbb-server\webapps}}}. 

At this point, your {{{bbb-server}}} directory should look like

http://bigbluebutton.googlecode.com/svn/trunk/bbb-images/install_win/bbb-server_layout.png


Before we start the server, let's ensure we have defined a conference room (ID) for that a user can join.

  1. Edit {{{TOOLS_DIR\bbb-server\webapps\conference\conferences\conferences.xml}}} to create conference rooms. 
  
Note: This file was created under UNIX, so it's missing the carriage returns.  You can edit it by using a programmer's editor (such as [http://www.textpad.com/ textpad]), or use Notepad to copy and replace it with the following:

{{{
<?xml version="1.0" encoding="UTF-8" ?>
<conference-rooms>
    <conference-room>
        <name>85115</name>
        <mod-password>modpass</mod-password>
        <view-password>viewpass</view-password>
    </conference-room>

    <conference-room>
        <name>85101</name>
        <mod-password>modpass</mod-password>
        <view-password>viewpass</view-password>
    </conference-room>
</conference-rooms> 	
}}}

Next, we need to edit {{{modules.xml}}}.  This XML specifies for the BigBlueButton client the host name for the Red5 server and the URL to upload slides to the tomcat server.

  1. Open {{{TOOLS_DIR\tomcat\webapps\ROOT\client\conf\modules.xml}}} with an editor.
  1. Change the value of {{{localhost}}} in the attribute {{{uri}}} point to {{{HOSTNAME}}}.  
  1. Change the value of {{{localhost}}} in the attribute {{{host}}} to point to {{{HOSTNAME:8080}}} (you need to specify {{{8080}}} if you have tomcat running on its default port).  For example, if {{{HOSTNAME}}} for your machine is 192.168.0.150, this file should contain the following values:
{{{
<modules>
	<module name="VideoModule" url="VideoModule.swf" uri="rtmp://localhost/oflaDemo" />
	<module name="ChatModule" url="ChatModule.swf" uri="rtmp://localhost/chatServer" />
	<module name="ViewersModule" url="ViewersModule.swf" uri="rtmp://localhost/conference" />
	<module name="ListenersModule" url="ListenersModule.swf" uri="rtmp://localhost/astmeetme" />
	<module name="PresentationModule" url="PresentationModule.swf" 
		uri="rtmp://92.168.0.150/presentation" host="http://92.168.0.150:8080" />
</modules>
}}}


== Login Check ==

At this point we have installed enough components to login.  First, let's make sure all the servers are running.

== Start activeMQ server ==
If not already running, start the activeMQ server.
  1. Open a new command window.
  1. Change directory to {{{TOOlS_DIR\activeMQ\bin}}} 
  1. type {{{activemq.bat}}}
 
== Start tomcat server ==
If not already running, start the tomcat server.
  1. Open a new command window.
  1. Change directory to {{{TOOlS_DIR\tomcat\bin}}} 
  1. type {{{catalina.bat start}}}

== Start BigBlueButton server ==
If not already running, start the BigBlueButton server.
  1. Open a new command window.
  1. Change directory to {{{TOOLS_DIR\bbb-server}}} 
  1. type {{{red5.bat}}}

Note: the BigBlueButton server (Red5 server) takes about 10 seconds to startup (depending on the speed of your machine).  Now, open http://HOSTNAME:8080/client/BigBlueButton.html (tomcat is case sensitive) and login with your name, conference ID {{{85115}}}, and password {{{modpass}}}.

http://bigbluebutton.googlecode.com/svn/trunk/bbb-images/install_win/real_login.png

You should see the main screen.

http://bigbluebutton.googlecode.com/svn/trunk/bbb-images/install_win/first_login_success.png

At this point, you can start multiple clients from multiple browser and chat.  You can also share your web cams.  However, before you can upload slides, you'll need to configure the {{{bigbluebutton.war}}} servlet.


== Configure bigbluebutton.war ==

This servlet accepts the upload of PDF slides from the client.  It uses pdftk and pdf2swf to convert the uploaded PDF file into individual SWF images that the BigBlueButton client can display to users.

  1. Download bigbluebutton.war from [http://code.google.com/p/bigbluebutton/downloads/list]
  1. Put into {{{TOOLS_DIR\tomcat\webapps}}}.
  1. Start the tomcat server (no need to restart if it's already running).  You'll see in the tomcat server console that it's unpacking the WAR file into the webapps directory).
  1. After the unpacking is finished, edit {{{TOOLS_DIR\tomcat\webapps\bigbluebutton\WEB-INF\bigbluebutton.properties}}} to point to the location of pdf2swf, pdftk, and the upload directory.  If you've been using the suggested defaults in this guide, you can copy and paste the following configuration:
{{{
# Define these to prevent warning messages   
openoffice.host=localhost
openoffice.port=8100

# Edit to point to your pdf2swf executable
swftoolLocation=c:/tools/swftools/pdf2swf

# Edit to point to your pdftk executable
pdfExtractor=c:/tools/pdftk/pdftk

# The base directory where uploaded slides are extracted
presBaseDirectory=c:/temp/uploads
extractedFolder=extracted
}}}


== Try uploading a PDF file ==

To upload a PDF, you need to make yourself presenter.  First, click on your name to highligh it, then click the Make Presenter button.

http://bigbluebutton.googlecode.com/svn/trunk/bbb-images/install_win/make_presenter_step1.png

Next, click the Upload PDF button.

http://bigbluebutton.googlecode.com/svn/trunk/bbb-images/install_win/make_presenter_step2.png

Next, click the '+' button to select a PDF file to upload.  If you don't have one ready, there's one installed with Tomcat in {{{TOOLS_DIR\tomcat\webapps\docs\architecture\requestProcess\requestProcess.pdf}}}.

http://bigbluebutton.googlecode.com/svn/trunk/bbb-images/install_win/make_presenter_step3.png

Click Upload button. 

You should see the slides converting, then displayed.



== Troubleshooting ===

=== Security Error on Upload of slides ===

If you get a security error when trying to upload slides 

http://bigbluebutton.googlecode.com/svn/trunk/bbb-images/install_win/security_error.png

then check the value for {{{host}}} in {{{TOOLS_DIR\tomcat\webapps\ROOT\client\conf\modules.xml}}}.  For example, if this value is {{{http://92.168.0.150:8080}}}, then try entering that URL into your browser.  You should get the welcome page for the tomcat server.

=== Upload is successful, but there are no converting 1 of N, 2 of N messages ===

Try shutting down the activeMQ, tomcat, and BigBlueButton servers.  Then start activeMQ first, then tomcat and BigBlueButton servers.  Try again.