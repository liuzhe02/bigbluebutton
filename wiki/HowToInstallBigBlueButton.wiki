#summary How to setup your own BigBlueButton Server (Windows)

= Overview =
These instructions show how to setup BigBlueButton server for Windows.  While there is no specific OS requirement for BigBlueButton, BigBlueButton runs on Mac and Windows as well (hey, its open source!), if you are running Windows XP (or above) with at least 1GB of memory, you're good to go.

There are four servers to run for BigBlueButton:
  * bigbluebutton server (built on red5)
  * asterisk server
  * activeMQ server
  * tomcat server

Note: These instructions don’t go into details on setting up an Asterisk server.  For now, you don't need an Asterisk server running to setup and use BigBlueButton; however, if you want an integrated voice conference server, you'll need to setup Asterisk as well.

For the tomcat server, there are two additional components to install:
  * bigbluebutton.war (which handles the upload of slies) 
  * client.zip (a ZIP file containing the client)
  
For bigbluebutton.war, there are two supporting command-line applications used to convert PDF slides to SWF images:
  * pdftk (breaks up PDF files into individual pages)
  * pdf2swf (converts a PDF file to SWF)

Here's a diagram that gives an overview of how these components work together.

http://present.carleton.ca:8080/files/docs/images/bbb-overview.png


= Installing Components =

Before you begin, you'll need to create some directories.  Note: The instructions use the {{{c:}}} drive, but you can use any drive for installation.

  1. Create {{{c:\tools}}} - referred to as {{{TOOLS_DIR}}} for the rest of these instructions.  For example, if you wanted to set the environment variable ANT_HOME to point to {{{TOOLS_DIR\ant}}},  set it to {{{c:\tools\ant}}}.
  1. Create {{{c:\source }}} - referred to as {{{SOURCE_DIR}}} 
  1. Create {{{c:\temp}}} - referred to as {{{TEMP_DIR}}}.  
 
You will also need to know the host name (or IP address) of your server, referred to as {{{HOSTNAME}}}.  Note: This could be a fully qualified domanin name, such as mycomputer.network.com, or an IP address.


== Install Software ==
For the downloads below, just grab the latest version of each open source component.  If your server already has a component, such as ant, you can skip that step.


=== Java Development Kit ===
  1. Download the [http://java.sun.com/javase/downloads/index.jsp JDK 6] installer
  1. Install the JDK to {{{TOOLS_DIR}}} - e.g. {{{TOOLS_DIR\jdk}}}
  1. Click {{{Start -> Control Panel -> System -> Advanced tab -> Environment Variables}}} on your computer.
  1. Add a system variable {{{JAVA_HOME}}} pointing to {{{JAVA_HOME = TOOLS_DIR\jdk}}}
  1. Open a command prompt and run {{{java -version}}}. You should see the java version (JDK 1.6 or above) displayed.

=== Ant ===
  1. Download the [http://ant.apache.org Ant] ZIP file.
  1. Uncompress the ZIP file into {{{TOOLS_DIR}}} - e.g. {{{TOOLS_DIR\ant}}}.
  1. Click {{{Start -> Control Panel -> System -> Advanced tab -> Environment Variables}}} on your computer.
  1. Add a system variable {{{ANT_HOME}}} pointing to {{{ANT_HOME = TOOLS_DIR\ant}}}
  1. Add {{{ANT_HOME\bin}}} to your system PATH - e.g. {{{TOOLS_DIR\ant\bin}}}.
  1. Open a command prompt and run {{{ant -version}}}.  You should see the ant version displayed.

=== ActiveMQ ===
  1. Download [http://activemq.apache.org ActiveMQ]
  1. Install activeMQ in {{{TOOLS_DIR}}} - e.g. {{{TOOLS_DIR\activemq}}}
  1. Open a command prompt and {{{cd}}} to {{{TOOLS_DIR\activemq\bin\win32}}}
  1. Run {{{activemq.bat}}}
  1. You should set the AcitveMQ startup messages with no errors.

=== Tomcat ===
  1. Download [http://tomcat.apache.org Tomcat] ZIP file
  1. Uncompress the ZIP file into {{{TOOLS_DIR}}} - e.g. {{{TOOLS_DIR\tomcat}}}
  1. Open a command prompt and {{{cd}}} to {{{TOOLS_DIR\tomcat\bin}}}
  1. Run {{{catalina.bat start}}}
  1. Open your browser and go to {{{http://HOSTNAME:8080}}}
  1. You should see the Tomcat welcome page displayed.

Note: Tomcat installs on port 8080 by default.  You can, of course, change tomcat's settings to listen on port 80.  If you change the settings, you can omit the port 8080 qualifer from the rest of these instructions.


=== SWF Tools and PDF Toolkit ===
  1. Download [http://www.swftools.org SWF Tools]
  1. Install in {{{TOOLS_DIR\swftools}}}
  1. Download [http://www.accesspdf.com/pdftk PDF Toolkit]
  1. Install in {{{TOOLS_DIR\pdftk}}}

=== Subversion Client ===
At this point we’re ready to checkout the needed source files for BigBlueButton.  To checkout code, you'll need a [http://tortoisesvn.tigris.org/ subversion client].


== Download Source ==

=== BigBlueButton Client ===
  1. Download the latest [http://code.google.com/p/bigbluebutton/downloads/list bigbluebutton-client] ZIP file
  1. Unzip the client into {{{TOOLS_DIR\tomcat\webapps\client}}}.  
 
If you’ve left the tomcat server running, you should be able to open http://HOSTNAME:8080/client and see the login screen.  Note, you won't be able to login yet -- we need to get a few more components going.

=== BigBlueButton Servlet ===
  1. Use a subversion client to checkout the latest [http://bigbluebutton.googlecode.com/svn/trunk/ http://bigbluebutton.googlecode.com/svn/trunk/] bigbluebutton-servlet into {{{SOURCE_DIR\bigbluebutton-servlet}}}

=== BigBlueButton Server ===
  1. Download the latest [http://bigbluebutton.googlecode.com/svn/trunk/ http://bigbluebutton.googlecode.com/svn/trunk/] bigbluebutton-server into {{{SOURCE_DIR\bigbluebutton-server}}}


= Setting up the Asterisk Server =

== Asterisk ==
You'll need to setup an asterisk server (though not required if you don't want voice conferencing).  We'll refer to the host name for the asterisk server as {{{ASTERISK_HOSTNAME}}}.

  1. Download and install the latest version of Asterisk from [http://www.asterisk.org/downloads Asterisk website].
  1. Configure Asterisk using the [http://bigbluebutton.googlecode.com/svn/trunk/asterisk/ sample extensions.conf and meetme.conf] files on the BigblueButton repository

= Configure Components =


== Configure Client ==
  1. Edit {{{TOOLS_DIR\tomcat\webapps\client\BigBlueButton.html}}} and change the value of {{{localhost}}} with your HOSTNAME.  For example, if your HOSTNAME was 192.168.0.104, you would change
{{{
function getRed5()
{
	return "localhost"
}

function getPresentationHost()
{
	return "localhost:8080"
}
}}}
to
{{{
function getRed5()
{
	return "192.168.0.104"
}

function getPresentationHost()
{
	return "192.168.0.104:8080"
}
}}}

Note: 

== Configure bigbluebutton.war ==
If they are not running,  activeMQ and tomcat running.
  1. Edit {{{SOURCE_DIR\bigbluebutton-servlet\war\WEB-INF\bigbluebutton.properties}}}.
{{{
    swftoolLocation=c:/tools/swftools/pdf2swf (Edit to point to your pdf2swf executable)
    pdfExtractor=c:/tools/pdftk/pdftk (Edit to point to your pdftk executable)
    presBaseDirectory=c:/temp/upload (directory where uploaded slides are extracted)
    extractedFolder=extracted
}}}
  1. Open a command prompt and {{{cd}}} to {{{SOURCE_DIR\bigbluebutton-servlet}}} and type {{{ant warfile}}} to build the bigbluebutton.war file.  
  1. copy {{{bigbluebutton.war}}} to {{{TOOLS_DIR\tomcat\webapps}}} to deploy it to your Tomcat server.


== Configure BigBlueButton server ==
  1. Edit {{{SOURCE_DIR\bigbluebutton-server\webapps\astmeetme\WEB-INF\astmeetme.properties}}} with your Asterisk Management Interface (AMI) values.  (Note: If you don’t have asterisk running you can skip this step.)  These properties are for Asterisk Management Interface (AMI)
{{{
    ami.host=ASTERISK_HOSTNAME
    ami.port=5038
    ami.username=<your_ami_username>
    ami.password=<your_ami_password>
}}}
  1. Edit {{{SOURCE_DIR\bigbluebutton-server\webapps\conference\conferences\conferences.xml}}} to create conference rooms. Make sure <name> has an equivalent entry in your Asterisk's {{{meetme.conf}}} file.  You can use the default settings for now.
{{{
    <conference-room>
        <name>85101</name>
        <mod-password>modpass</mod-password>
        <view-password>viewpass</view-password>
    </conference-room>
}}}


= Start Servers =

== Start activeMQ server ==
If not already running, start the activeMQ server.
  1. Open a new command window.
  1. Change directory to {{{TOOlS_DIR\activeMQ\bin\win32}}} 
  1. type {{{activemq.bat}}}
 
== Start tomcat server ==
If not already running, start the tomcat server.
  1. Open a new command window.
  1. Change directory to {{{TOOlS_DIR\tomcat\bin}}} 
  1. type {{{catalina.bat start}}}

== Start BigBlueButton server ==
  1. Open a new command window.
  1. Change directory to {{{SOURCE_DIR\bigbluebutton-server}}} 
  1. type {{{ant server}}}
 
This will start the red5 server.  

= Launch BigBlueButton client. =
  1. Using a web browser, open the URL {{{http://HOSTNAMEL8080/client/BigBlueButton.html}}} (tomcat is case sensitive).  You should see the BigBlueButton client login.
  1. View the source. Make sure the {{{red5Host}}} and {{{presentationHost}}} variables are set.
 
Login with
{{{
    name: <your name>
    Conference ID: 85115
    password: modpass
}}}

Try uploading a PDF file for conversion or opening multiple clients and chatting between them.