#summary How to install BigBlueButton manually.


 * Download a Ubuntu VM image.
{{{
http://www.vmware.com/appliances/directory/va/147323/download
}}}

{{{
root@ubuntu904server:/usr/local# ifconfig -a

http://ubuntuforums.org/showthread.php?t=221768
}}}

{{{
1. Install Java 6
 > apt-get install openjdk-6-jre-headless

2. Install MySQL
 > apt-get install mysql-server

3. Install Tomcat
  > apt-cache search tomcat

  > apt-get install tomcat6

4. Confirm that tomcat is running
  http://<YOUR IP>:8080/

5. Install swftools
  > apt-get install swftools

6. Make a note of where pdf2swf is installed
  > which pdf2swf
  
  You should see something like
  /usr/bin/pdf2swf

7. Install ImageMagick
  > apt-get install imagemagick

8. Make a note of where the convert application is installed
  > which convert

  You shoud see something like.
  /usr/bin/convert

root@ubuntu904server:~# which gs
/usr/bin/gs


> apt-get install nginx

> cd opt
> wget http://apache.mirror.rafal.ca/activemq/apache-activemq/5.2.0/apache-activemq-5.2.0-bin.tar.gz


> /opt/apache-activemq-5.2.0/bin/activemq

wget http://build.xuggle.com/job/red5_jdk6_stable/131/artifact/workingcopy/red5-0.8.RC3-build-hudson-red5_jdk6_stable-131.tar.gz

http://godson.in/how-to-install-asterisk-on-ubuntu

#apt-get install build-essential
#apt-get install linux-headers-`uname -r`
#apt-get install libssl-dev
#apt-get install ncurses-dev
#apt-get install libnewt-dev
#apt-get install zlib1g-dev
#apt-get install bison


> wget http://downloads.asterisk.org/pub/telephony/dahdi-linux-complete/dahdi-linux-complete-2.2.0.1+2.2.0.tar.gz
> make all
> make install
> make config

> apt-get install chkconfig

> cd /usr/local/src
> wget http://downloads.asterisk.org/pub/telephony/asterisk/releases/asterisk-1.4.25.tar.gz

> tar zxvf asterisk-1.4.25.tar.gz
> cd asterisk-1.4.25
> more README
> ./configure
> make 
> make install
> make samples
> make config




/etc/asterisk/meetme.conf
conf => 85115

/etc/asterisk/extensions.conf
; BigBlueButton: Setup sample conference
[bigbluebutton]

exten => 85115,1,,Meetme(85115|csT)
exten => 85115,n,Hangup()

;
; Create an extension, 600, for evaluating echo latency.
;
exten => 600,1,Answer                   ; Do the echo test
exten => 600,n,Playback(demo-echotest)  ; Let them know what's going on
exten => 600,n,Echo                     ; Do the echo test
exten => 600,n,Playback(demo-echodone)  ; Let them know it's over
exten => 600,n,Hangup()


/etc/asterisk/sip.conf
[user1]
type=friend
username=user1
insecure=very
secret=letmein
qualify=yes
nat=yes
host=dynamic
canreinvite=no
context=bigbluebutton
allow=all

vi manager.conf
[general]
displaysystemname = yes
enabled = yes
;webenabled = yes
port = 5038

; BigBlueButton: Enable Red5 to connect
[bbb]
secret = secret
permit = 0.0.0.0/0.0.0.0
read = system,call,log,verbose,command,agent,user
write = system,call,log,verbose,command,agent,user

}}}

/etc/nginx/sites-available/bigbluebutton
{{{
server {
     listen   80;
     server_name  192.168.0.136;

     access_log  /var/log/nginx/bigbluebutton.access.log;

      location ~ (/open/|/close/|/idle/|/send/) {
          proxy_pass         http://127.0.0.1:8088;
          proxy_redirect     off;
          proxy_set_header   X-Forwarded-For   $proxy_add_x_forwarded_for;

          client_max_body_size       10m;
          client_body_buffer_size    128k;

          proxy_connect_timeout      90;
          proxy_send_timeout         90;
          proxy_read_timeout         90;

          proxy_buffering            off;
      }


       location /deskshare {
           proxy_pass         http://127.0.0.1:5080;
           proxy_redirect     default;
           proxy_set_header   X-Forwarded-For   $proxy_add_x_forwarded_for;
           client_max_body_size       10m;
           client_body_buffer_size    128k;
           proxy_connect_timeout      90;
           proxy_send_timeout         90;
           proxy_read_timeout         90;
           proxy_buffer_size          4k;
           proxy_buffers              4 32k;
           proxy_busy_buffers_size    64k;
           proxy_temp_file_write_size 64k;
           include    fastcgi_params;
       }


       location /bigbluebutton {
           proxy_pass         http://127.0.0.1:8080;
           proxy_redirect     default;
           proxy_set_header   X-Forwarded-For   $proxy_add_x_forwarded_for;

           client_max_body_size       10m;
           client_body_buffer_size    128k;

           proxy_connect_timeout      90;
           proxy_send_timeout         90;
           proxy_read_timeout         90;

           proxy_buffer_size          4k;
           proxy_buffers              4 32k;
           proxy_busy_buffers_size    64k;
           proxy_temp_file_write_size 64k;

           include    fastcgi_params;
       }

        location / {
          root   /var/www/bigbluebutton-default;
          index  index.html index.htm;
        }

        location /client {
                root    /var/www/bigbluebutton;
                index  index.html index.htm;
        }

        #error_page  404  /404.html;

        # redirect server error pages to the static page /50x.html
        #
        error_page   500 502 503 504  /50x.html;
        location = /50x.html {
                root   /var/www/nginx-default;
        }
}

}}}

> ln -s /etc/nginx/sites-available/bigbluebutton /etc/nginx/sites-enabled/bigbluebutton


wget http://www.bigbluebutton.org/hudson/job/BBB-Trunk-Apps/ws/dist/bigbluebutton-apps-0.5.tar.gz

 wget http://www.bigbluebutton.org/hudson/job/BBB-Trunk-Apps-Deskshare/ws/dist/webapps/deskshare.tar.gz

wget http://www.bigbluebutton.org/hudson/job/BBB-Trunk-Client/ws/client.tar.gz

 wget http://www.bigbluebutton.org/hudson/job/BBB-Trunk-Web/ws/bigbluebutton-0.1.war

{{{
> vi /etc/default/tomcat6

TOMCAT6_SECURITY=no
}}}


{{{
root@ubuntu904server:/home/user/temp# mysql -u root -p
Enter password:
Welcome to the MySQL monitor.  Commands end with ; or \g.
Your MySQL connection id is 33
Server version: 5.0.75-0ubuntu10.2 (Ubuntu)

Type 'help;' or '\h' for help. Type '\c' to clear the buffer.

mysql> create database bigbluebutton_dev;
Query OK, 1 row affected (0.05 sec)

mysql> grant all on bigbluebutton_dev.* to 'bbb'@'localhost' identified by 'secret';
Query OK, 0 rows affected (0.04 sec)

mysql> commit;
Query OK, 0 rows affected (0.00 sec)

mysql>
}}}

root@ubuntu904server:/var/lib/tomcat6/webapps# cp /home/user/temp/bigbluebutton-0.1.war ./bigbluebutton.war

{{{
#
# These are the default properites for BigBlueButton Web application

dataSource.url=jdbc:mysql://localhost/bigbluebutton_dev
dataSource.username=bbb
dataSource.password=secret

swfToolsDir=/usr/bin
imageMagickDir=/usr/bin
presentationDir=/var/bigbluebutton
ghostScriptExec=/usr/bin/gs

beans.presentationService.swfToolsDir=${swfToolsDir}
beans.presentationService.imageMagickDir=${imageMagickDir}
beans.presentationService.presentationDir=${presentationDir}

# Use fullpath to ghostscript executable since the exec names are different
# for each platform.
beans.presentationService.ghostScriptExec=${ghostScriptExec}

#
# This URL needs to reference the host running the tomcat server
bigbluebutton.web.serverURL=http://localhost

# This is a workaround for a problem converting PDF files, referenced at
# http://groups.google.com/group/comp.lang.postscript/browse_thread/thread/c2e264ca76534ce0?pli=1
noPdfMarkWorkaround=/etc/bigbluebutton/nopdfmark.ps
beans.presentationService.noPdfMarkWorkaround=${noPdfMarkWorkaround}


}}}


Set the following
{{{
dataSource.url=jdbc:mysql://localhost/bigbluebutton_dev^M
dataSource.username=bbb^M
dataSource.password=secret^M
^M
swfToolsDir=/usr/bin^M
imageMagickDir=/usr/bin^M
presentationDir=/var/bigbluebutton^M
ghostScriptExec=/usr/bin/gs^M
}}}

{{{
root@bbb-vm-20090629:/var/lib/tomcat6/webapps/bigbluebutton/WEB-INF/classes# mysql -u root -p
Enter password:
Welcome to the MySQL monitor.  Commands end with ; or \g.
Your MySQL connection id is 56
Server version: 5.0.75-0ubuntu10.2 (Ubuntu)

Type 'help;' or '\h' for help. Type '\c' to clear the buffer.

mysql> use bigbluebutton_dev;
Reading table information for completion of table and column names
You can turn off this feature to get a quicker startup with -A

Database changed
mysql> show tables;
+-----------------------------+
| Tables_in_bigbluebutton_dev |
+-----------------------------+
| account                     |
| account_conference          |
| account_user                |
| conference                  |
| permission                  |
| role                        |
| role_permission_rel         |
| scheduled_session           |
| user                        |
| user_permission_rel         |
| user_role_rel               |
| voice_conference_bridge     |
+-----------------------------+
12 rows in set (0.00 sec)

mysql> select * from user;
+----+---------+---------------------+-----------+---------------------+------------------------------------------+----------------+
| id | version | date_created        | full_name | last_updated        | password_hash                            | username       |
+----+---------+---------------------+-----------+---------------------+------------------------------------------+----------------+
|  1 |       0 | 2009-06-29 09:51:17 | Admin     | 2009-06-29 09:51:17 | d033e22ae348aeb5660fc2140aec35850c4da997 | admin@test.com |
+----+---------+---------------------+-----------+---------------------+------------------------------------------+----------------+
1 row in set (0.02 sec)

mysql>
}}}

{{{
root@ubuntu904server:/var# mkdir /var/bigbluebutton
root@ubuntu904server:/var# chown -R tomcat6:adm /var/bigbluebutton
  427  cd /var/bigbluebutton/
  428  ls
  429  ls -l
  430  cd ..
  431  ls
  432  ls -l
  433  chmod -R 777 bigbluebutton

}}}

{{{
Install oflaDemo
http://192.168.0.154:5080/

Click on "Click here to install demos" and then choose oflaDemo java 6.

http://192.168.0.154:5080/demos/

http://192.168.0.154:5080/demos/ofla_demo.html

Edit rtmp://192.168.0.154/oflaDemo and click connect

You would see a list of available videos. Select one to play.


}}}

{{{
Install bbb-apps
  305  cp /home/user/temp/bigbluebutton-apps-0.5.tar.gz ./
  306  ls
  307  tar zxvf bigbluebutton-apps-0.5.tar.gz
  308  ls
  309  mv webapps/bigbluebutton ./
  310  ls
  311  rm -rf bigbluebutton-apps-0.5.tar.gz webapps/

Edit 
vi /opt/red5-0.8/webapps/bigbluebutton/WEB-INF/bigbluebutton.properties

# Location for recordings
recordingsDirectory=/var/bigbluebutton


# These properties are for Asterisk Management Interface (AMI)
ami.host=127.0.0.1
ami.port=5038
ami.username=bbb
ami.password=secret


}}}

{{{
Uncommet RTMPT section of /opt/red5-0.8/conf/red5-core.xml


}}}


{{{
http://www.xuggle.com/xuggler/downloads/

  331  cd /usr/local
  473  wget http://com.xuggle.s3.amazonaws.com/xuggler/xuggler-3.1.FINAL/xuggle-xuggler.3.1.818-i686-pc-linux-gnu.sh
  474  ls
  475  chmow a+x xuggle-xuggler.3.1.818-i686-pc-linux-gnu.sh
  476  chmod a+x xuggle-xuggler.3.1.818-i686-pc-linux-gnu.sh
  477  ls
  478  ./xuggle-xuggler.3.1.818-i686-pc-linux-gnu.sh

  340  vi /etc/profile


export XUGGLE_HOME=/usr/local/xuggler
export LD_LIBRARY_PATH=$XUGGLE_HOME/lib:$LD_LIBRARY_PATH
export PATH=$XUGGLE_HOME/bin:$PATH

}}}

{{{
  351  cp /home/user/temp/deskshare.tar.gz ./
  352  ls
  353  tar zxvf deskshare.tar.gz
  354  ls
  355  rm deskshare.tar.gz
}}}

{{{
  357  cd /var/www
  358  ls
  359  cp /home/user/temp/client.tar.gz ./
  360  ls
  361  tar zxvf client.tar.gz
  362  ls
  363  mkdir bigbluebutton
  364  mv client bigbluebutton
  365  rm client.tar.gz
}}}

{{{
<?xml version="1.0" ?>
<config>
    <version>0.4</version>
    <porttest host="192.168.0.124" application="oflaDemo"/>
        <modules>
                <module name="VideoModule" url="VideoModule.swf"
                        uri="rtmp://192.168.0.124/oflaDemo"
                        onUserJoinedEvent="START"
                        onUserLogoutEvent="STOP"
                        loadNextModule="DeskShareModule"
                />
                <module name="ChatModule" url="ChatModule.swf"
                        uri="rtmp://192.168.0.124/bigbluebutton"
                        loadNextModule="PresentationModule"
                        onUserJoinedEvent="START"
                        onUserLogoutEvent="STOP"
                />
                <module name="ViewersModule" url="ViewersModule.swf"
                        uri="rtmp://192.168.0.124/bigbluebutton"
                        host="conf/join-mock.xml"
                        onAppInitEvent="LOAD" loadNextModule="ChatModule"
                        onAppStartEvent="START"
                        onUserLogoutEvent="STOP"
                />
                <module name="ListenersModule" url="ListenersModule.swf"
                        uri="rtmp://192.168.0.124/bigbluebutton"
                        recordingHost="http://192.168.0.124"
                        loadNextModule="VideoModule"
                        onUserJoinedEvent="START"
                        onUserLogoutEvent="STOP"
                />
                <module name="PresentationModule" url="PresentationModule.swf"
                        uri="rtmp://192.168.0.124/bigbluebutton"
                        host="http://192.168.0.124"
                        loadNextModule="ListenersModule"
                        onUserJoinedEvent="START"
                        onUserLogoutEvent="STOP"
                />

                <module name="DeskShareModule" url="DeskShareModule.swf"
                        uri="rtmp://192.168.0.124/deskShare"
                        onUserJoinedEvent="START"
                        onUserLogoutEvent="STOP"
                />

        </modules>
</config>
}}}

{{{
  436  cd /var/www/
  437  ls
  438  wget http://www.bigbluebutton.org/hudson/job/BBB-Trunk-Config/ws/web//*zip*/web.zip
  439  ls
  440  unzip -dc web.zip
  441  apt-get install unzip
  442  unzip -dc web.zip
  443  ls
  444  mv c/web ./bigbluebutton-default
  445  ls
  446  rm -rf c
}}}